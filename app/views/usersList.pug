//- extends layout

//- block content
//-   h1 User List

//-   // Filter by category
//-   form#filter-form(action="/users", method="GET")
//-     label(for="category") Select Category:
//-     select#category(name="category")
//-       option(value="") -- All Categories --
//-       option(value="Admin") Admin
//-       option(value="Editor") Editor
//-       option(value="Viewer") Viewer
//-     button(type="submit") Filter

//-   // User Table
//-   table
//-     thead
//-       tr
//-         th ID
//-         th Name
//-         th Category
//-         th Actions
//-     tbody#user-table

//-   // Pagination Controls
//-   div.pagination
//-     button#prev-btn Prev
//-     span#page-info Page 1
//-     button#next-btn Next

//-   script(src="/js/users.js")

extends layout

block content
  h1 User List

  if error
    p.error-message= error
  else
    form(method="GET" action="/users")
      label(for="category") Filter by Category:
      select(name="category" onchange="this.form.submit()")
        option(value="") All
        each cat in categories
          option(value=cat.category selected=(category === cat.category))= cat.category
    br

    ul.user-list
      each user in users
        li
          a(href=`/users/${user.id}`)= `${user.name} (${user.category})`
    
    .pagination
      if currentPage > 1
        a(href=`/users?page=${currentPage - 1}${category ? '&category=' + category : ''}`) Previous
      | Page #{currentPage}
      a(href=`/users?page=${currentPage + 1}${category ? '&category=' + category : ''}`) Next

